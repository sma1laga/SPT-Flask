{% extends "base.html" %}
{% block content %}
<div class="page-header" style="text-align:center;margin-bottom:20px;">
  <h1 style="font-size:2.2em;">Inverse z-Transform</h1>
  <p style="color:var(--subtext-color);">Enter a discrete system function \(H(z)\) to obtain the corresponding impulse response \(h[k]\).<br>
    The expression \(az^2+bz+c\) can be expressed as either <code>[a, b, c]</code> or <code>az^2+bz+c</code>.</p>
</div>

<form method="POST" style="max-width:500px;margin:0 auto;">
  <label for="numerator">Numerator:</label>
  <input type="text" id="numerator" name="numerator" value="{{ default_num }}" required>
  <label for="denominator" style="margin-top:10px;">Denominator:</label>

  <input type="text" id="denominator" name="denominator" value="{{ default_den }}" required>

  <label>Signal type:</label>
  <!-- TODO two switchable options for causal (|z|>R, standard) and anticausal (|z|<R), choosed value should not be switched to standard value after computation-->
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="roc_type" id="roc_gt" value="causal" checked>
    <label class="form-check-label" for="roc_gt">causal (|z| &gt; R)</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="roc_type" id="roc_lt" value="anticausal">
    <label class="form-check-label" for="roc_lt">anticausal (|z| &lt; R)</label>
  </div>
  <button type="submit" style="margin-top:10px;">Compute</button>

</form>
{% if error %}
  <p style="color:red; text-align:center;">{{ error }}</p>
{% endif %}

{% if sf_latex %}
  <div style="text-align:center;margin-top:25px;">
    <h2>System Function</h2>
    {% if sf_parts_latex %}
      <p>$$ \begin{align}
      H(z) &= {{ sf_latex|safe }}\\
      &= {{ sf_parts_latex|safe }}
      \end{align}
      $$</p>
    {% else %}
      <p>$$ H(z) = {{ sf_latex|safe }} $$</p>
    {% endif %}

    {% if roc_latex %}
      <p style="text-align:center;margin-top:25px;">
        $$ \mathrm{ROC}:\ {{ roc_latex|safe }} $$
      </p>
    {% endif %}
  </div>
{% endif %}

{% if hk_latex %}
  <div style="text-align:center;margin-top:25px;">
    <p>$$ h[k] = {{ hk_latex|safe }} $$</p>
  </div>
{% endif %}
<!-- TODO: plot instead of text-->
{% if seq %}
  <div style="text-align:center;margin-top:20px;">
    <h3>{{ seq_title|safe }}</h3>
    <p>$$ h[k] = {{ seq|safe }} $$</p>
  </div>
{% endif %}
{% endblock %}
@import url('https://fonts.googleapis.com/css2?family=STIX+Two+Text:wght@400;600;700&display=swap');
/* Statistical Signal Processing demos */

/* Conditional Distributions */
.conditional-distributions-layout{max-width:1180px;padding:0 10px}
.conditional-distributions-layout .page-header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-start;margin-bottom:4px}
.conditional-distributions-layout .page-header h1{margin:0;font-size:1.72rem;line-height:1.2}
.conditional-distributions-layout .page-header p{margin:4px 0 0;font-size:0.93rem;color:#4b5563;max-width:860px}
.conditional-distributions-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap}
.conditional-distributions-layout .demo-grid{display:grid;grid-template-columns:minmax(270px,320px) 1fr;grid-template-areas:"controls plot" "summary plot";gap:10px;align-items:start;margin-top:10px}
.conditional-distributions-layout .control-card,
.conditional-distributions-layout .plot-card,
.conditional-distributions-layout .summary-card{border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 6px 16px rgba(0,0,0,0.05);background:white}
.conditional-distributions-layout .control-card{grid-area:controls}
.conditional-distributions-layout .plot-card{grid-area:plot;display:flex;flex-direction:column;gap:8px;min-width:0}
.conditional-distributions-layout .summary-card{grid-area:summary}
.conditional-distributions-layout .kv-row{display:grid;grid-template-columns:104px 1fr 54px;gap:6px;align-items:center;margin:1px 0}
.conditional-distributions-layout .kv-row label{font-weight:600;font-size:0.9rem;color:#111827}
.conditional-distributions-layout .kv-row input[type=range]{width:100%;height:5px}
.conditional-distributions-layout .inline-note{color:#4b5563;font-size:0.88rem;margin-top:4px}
.conditional-distributions-layout .control-grid{display:grid;gap:5px}
.conditional-distributions-layout .pill{display:inline-flex;align-items:center;gap:6px;padding:5px 9px;border-radius:999px;background:#eef2ff;color:#1f2a6b;font-weight:600;font-size:0.85rem;line-height:1}
.conditional-distributions-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.conditional-distributions-layout .error{color:#b91c1c;font-weight:600;margin-top:6px}
.conditional-distributions-layout .plot-header{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
.conditional-distributions-layout .plot-meta{display:flex;align-items:center;gap:10px}
.conditional-distributions-layout .plot-wrapper{height:clamp(500px,60vh,680px);min-height:500px;width:100%;min-width:0;overflow:hidden}
.conditional-distributions-layout .summary-card{display:grid;gap:8px}
.conditional-distributions-layout .summary-strip{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px}
.conditional-distributions-layout .summary-item{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:8px 9px;display:flex;flex-direction:column;gap:2px}
.conditional-distributions-layout .summary-label{font-size:0.78rem;color:#6b7280;text-transform:uppercase;letter-spacing:0.03em;font-weight:700}
.conditional-distributions-layout .summary-value{font-size:0.96rem;font-weight:700;color:#111827}
.conditional-distributions-layout .summary-value.accent{color:#2563eb}
.conditional-distributions-layout .summary-value.strong{color:#16a34a}
.conditional-distributions-layout .latex-title{font-size:0.95rem;font-weight:700;text-align:left;margin:0;color:#0f172a}
.conditional-distributions-layout .subplot-labels{display:grid;grid-template-columns:1fr 1fr;gap:4px;margin:2px 0 6px;font-weight:600;color:#111827;font-size:0.9rem}
.conditional-distributions-layout .subplot-label{text-align:left}
body.dark-mode .conditional-distributions-layout .control-card,
body.dark-mode .conditional-distributions-layout .plot-card,
body.dark-mode .conditional-distributions-layout .summary-card{
  background: var(--card-background);
  border-color: var(--border-color);
  color: var(--text-color);
  box-shadow: none;
}
body.dark-mode .conditional-distributions-layout .kv-row label,
body.dark-mode .conditional-distributions-layout .subplot-labels,
body.dark-mode .conditional-distributions-layout .latex-title{
  color: #e5e7eb;
}
body.dark-mode .conditional-distributions-layout .kv-row span,
body.dark-mode .conditional-distributions-layout .inline-note,
body.dark-mode .conditional-distributions-layout .summary-label{color: #cbd5e1;}
body.dark-mode .conditional-distributions-layout .summary-item{
  background: #1f2733;
  border-color: #3a4250;
}
body.dark-mode .conditional-distributions-layout .summary-value{color:#f8fafc;}
body.dark-mode .conditional-distributions-layout .summary-value.accent{color:#9cc2ff;}
body.dark-mode .conditional-distributions-layout .summary-value.strong{color:#34d399;}
body.dark-mode .conditional-distributions-layout select,
body.dark-mode .conditional-distributions-layout input[type=range]{
  background:#111827;
  color:#e5e7eb;
  border-color:#3a4250;
}
@media(max-width:1180px){.conditional-distributions-layout .demo-grid{grid-template-columns:1fr;grid-template-areas:"controls" "summary" "plot"}}
@media(max-width:1100px){.conditional-distributions-layout .plot-wrapper{height:clamp(400px,54vh,520px)}}

/* Mapping Random Variables */
.mapping-rv-layout{--plot-height:230px;max-width:min(1220px, calc(100vw - 28px));}
.mapping-rv-layout .page-header{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-start;margin-bottom:4px;}
.mapping-rv-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap;}
.mapping-rv-layout .demo-grid{display:flex;flex-direction:column;gap:12px;align-items:stretch;margin-top:10px;}
.mapping-rv-layout .control-card,
.mapping-rv-layout .plot-card{border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);background:white;}
.mapping-rv-layout .plots-card{display:flex;flex-direction:column;gap:8px;}
.mapping-rv-layout .kv-row{display:grid;grid-template-columns:112px 1fr 52px;gap:6px;align-items:center;margin:4px 0;}
.mapping-rv-layout .kv-row label{font-weight:600;font-size:0.93rem;}
.mapping-rv-layout .kv-row input[type=range],
.mapping-rv-layout .kv-row input[type=text]{width:100%;}
.mapping-rv-layout .control-grid{display:grid;gap:6px;}
.mapping-rv-layout .pill{display:inline-flex;align-items:center;gap:7px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#1f2a6b;font-weight:600;font-size:0.86rem;}
.mapping-rv-layout .pill-subtle{background:#f3f4f6;color:#4b5563;}
.mapping-rv-layout .inline-note{color:#4b5563;font-size:0.9rem;margin-top:2px;}
.mapping-rv-layout .error{color:#b91c1c;font-weight:600;margin-top:6px;min-height:18px;}
.mapping-rv-layout .summary-strip{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px;margin-top:6px;margin-bottom:4px;}
.mapping-rv-layout .summary-item{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px;display:flex;flex-direction:column;gap:2px;}
.mapping-rv-layout .summary-label{font-size:0.82rem;color:#6b7280;text-transform:uppercase;letter-spacing:0.03em;font-weight:700;}
.mapping-rv-layout .summary-value{font-size:0.98rem;font-weight:700;color:#111827;}
.mapping-rv-layout .summary-value.accent{color:#2563eb;}
.mapping-rv-layout .summary-value.strong{color:#16a34a;}
.mapping-rv-layout .latex-title{font-size:1rem;font-weight:700;text-align:left;margin:2px;color:#0f172a;}
.mapping-rv-layout .plots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:8px;align-items:start;}
.mapping-rv-layout .plot-frame{border:1px solid #e5e7eb;border-radius:10px;padding:8px;background:#fbfdff;box-shadow:inset 0 1px 0 rgba(255,255,255,0.8);}
.mapping-rv-layout .plot-label{font-weight:700;font-size:0.95rem;color:#0f172a;margin:0 0 6px 2px;display:flex;align-items:center;gap:6px;}
.mapping-rv-layout .plot-wrapper{height:var(--plot-height);width:100%;}
body.dark-mode .mapping-rv-layout .control-card,
body.dark-mode .mapping-rv-layout .plot-card,
body.dark-mode .mapping-rv-layout .plot-frame{
  background: var(--card-background);
  border-color: var(--border-color);
  color: var(--text-color);
  box-shadow: none;
}
body.dark-mode .mapping-rv-layout .kv-row label,
body.dark-mode .mapping-rv-layout .plot-label,
body.dark-mode .mapping-rv-layout .latex-title{color:#e5e7eb;}
body.dark-mode .mapping-rv-layout .kv-row span,
body.dark-mode .mapping-rv-layout .inline-note,
body.dark-mode .mapping-rv-layout .summary-label{color:#cbd5e1;}
body.dark-mode .mapping-rv-layout .summary-item{background:#1f2733;border-color:#3a4250;}
body.dark-mode .mapping-rv-layout .summary-value{color:#f8fafc;}
body.dark-mode .mapping-rv-layout .summary-value.accent{color:#9cc2ff;}
body.dark-mode .mapping-rv-layout .summary-value.strong{color:#34d399;}
body.dark-mode .mapping-rv-layout select,
body.dark-mode .mapping-rv-layout input[type=range],
body.dark-mode .mapping-rv-layout input[type=text]{
  background:#111827;
  color:#e5e7eb;
  border-color:#3a4250;
}
@media(max-width:1100px){
  .mapping-rv-layout{--plot-height:220px;}
}
@media(max-height:900px){
  .mapping-rv-layout{--plot-height:210px;}
}

/* 2D Normal Distributions */
.normal2d-layout{max-width:1360px}
.normal2d-layout .page-header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-start}
.normal2d-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap}
.normal2d-layout .pill{display:inline-flex;align-items:center;gap:7px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#1f2a6b;font-weight:600;font-size:0.86rem}
.normal2d-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.normal2d-layout .card{border:1px solid #d9dfe7;border-radius:12px;padding:14px;box-shadow:0 4px 12px rgba(0,0,0,0.05);background:white}
.normal2d-layout .layout-grid{display:grid;grid-template-columns:minmax(340px,380px) 1fr;gap:14px;margin-top:12px;align-items:start}
.normal2d-layout .control-group{display:grid;gap:8px;margin-top:6px}
.normal2d-layout .kv-row{display:grid;grid-template-columns:140px 1fr 70px;align-items:center;gap:10px}
.normal2d-layout .kv-row label{font-weight:600;font-size:0.95rem}
.normal2d-layout .kv-row input[type=range]{width:100%}
.normal2d-layout .kv-row input[type=number]{width:100%;padding:6px;border:1px solid #d1d5db;border-radius:8px}
.normal2d-layout .toggle-row{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px;font-weight:600;color:#1f2937}
.normal2d-layout .formula-box{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;margin-top:10px;font-size:0.95rem;line-height:1.5}
.normal2d-layout .formula-wide{font-size:1.05rem;text-align:center;overflow-x:auto}
.normal2d-layout .plot-wrapper{height:560px;width:100%}
.normal2d-layout .subtitle{margin:2px 0 8px;color:#475569;font-size:0.95rem}
.normal2d-layout .summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin-top:8px}
.normal2d-layout .summary-item{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px;display:flex;flex-direction:column;gap:2px}
.normal2d-layout .summary-label{font-size:0.82rem;color:#6b7280;text-transform:uppercase;letter-spacing:0.03em;font-weight:700}
.normal2d-layout .summary-value{font-size:0.98rem;font-weight:700;color:#111827}
.normal2d-layout .control-card .subtitle{margin-bottom:4px}
body.dark-mode .normal2d-layout .pill{background:rgba(96,165,250,0.15);color:#dbeafe;}
body.dark-mode .normal2d-layout .kv-row label,
body.dark-mode .normal2d-layout .subtitle,
body.dark-mode .normal2d-layout .summary-value{color:#e5e7eb;}
body.dark-mode .normal2d-layout .toggle-row{color:#e5e7eb;}
body.dark-mode .normal2d-layout .formula-box{
  background:#1f2733;
  border-color:#3a4250;
  color:#e8edf5;
  box-shadow:none;
}
body.dark-mode .normal2d-layout #formula{color:#e8edf5;}
body.dark-mode .normal2d-layout .summary-item{background:#1f2733;border-color:#3a4250;}
body.dark-mode .normal2d-layout .summary-label{color:#cbd5e1;}
@media(max-width:1300px){
  .normal2d-layout .layout-grid{grid-template-columns:1fr}
}
@media(max-width:1100px){.normal2d-layout .plot-wrapper{height:520px}}

/* Central Limit Theorem */
.clt-layout{max-width:1240px;padding:4px 8px}
body.demo-sidebar-collapsed .clt-layout{max-width:calc(100vw - 32px)}
.clt-layout .page-header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-start;margin-bottom:4px}
.clt-layout .page-header h1{margin-bottom:6px}
.clt-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap}
.clt-layout .pill{display:inline-flex;align-items:center;gap:7px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#1f2a6b;font-weight:600;font-size:0.86rem}
.clt-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.clt-layout .demo-grid{display:grid;grid-template-columns:minmax(310px,340px) 1fr;gap:14px;align-items:start}
body.demo-sidebar-collapsed .clt-layout .demo-grid{grid-template-columns:320px 1fr}
.clt-layout .card{background:white;border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
.clt-layout .kv-row{display:grid;grid-template-columns:118px 1fr 58px;gap:8px;align-items:center;margin:4px 0}
.clt-layout .kv-row label{font-weight:600;font-size:0.95rem}
.clt-layout .kv-row input,
.clt-layout .kv-row select{width:100%}
.clt-layout .cta-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:4px}
.clt-layout .btn-primary{background:#2563eb;color:white;border:none;border-radius:8px;padding:8px 12px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px rgba(37,99,235,0.25)}
.clt-layout .btn-primary:disabled{opacity:0.6;cursor:not-allowed}
.clt-layout .error{color:#b91c1c;font-weight:600;min-height:20px;margin-top:4px}
.clt-layout .inline-note{color:#4b5563;font-size:0.9rem;margin-top:4px}
.clt-layout .plot-card{display:flex;flex-direction:column;gap:8px}
.clt-layout .stat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}
.clt-layout .stat-box{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:8px 10px}
.clt-layout .stat-label{font-size:0.78rem;color:#6b7280;font-weight:700;letter-spacing:0.03em;text-transform:uppercase}
.clt-layout .stat-value{font-size:1.02rem;font-weight:800;color:#0f172a}
.clt-layout #clt-plot{width:100%;height:440px;min-height:360px}
@media(max-width:1100px){
  .clt-layout{padding:6px 4px}
  .clt-layout .demo-grid{grid-template-columns:1fr}
  .clt-layout .kv-row{grid-template-columns:112px 1fr 48px}
  .clt-layout #clt-plot{height:400px}
}

/* Distributions */
.distributions-layout{max-width:1320px}
.distributions-layout .page-header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-start;margin-bottom:6px}
.distributions-layout .chip-row{display:flex;gap:10px;flex-wrap:wrap}
.distributions-layout .demo-grid{display:grid;grid-template-columns:minmax(320px,360px) 1fr;gap:16px;align-items:start;margin-top:4px}
.distributions-layout .card{border:1px solid #d9dfe7;border-radius:14px;padding:16px;box-shadow:0 8px 22px rgba(0,0,0,0.06);background:white;height:100%;display:flex;flex-direction:column;gap:10px}
.distributions-layout .card.card-plot{gap:12px}
.distributions-layout .card h3{margin-top:0;font-size:1.1rem;margin-bottom:12px}
.distributions-layout .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#1f2a6b;font-weight:600;font-size:0.9rem}
.distributions-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.distributions-layout .kv-row{display:grid;grid-template-columns:120px 1fr 58px;gap:10px;align-items:center;margin:6px 0}
.distributions-layout .kv-row label{font-weight:600;font-size:0.95rem}
.distributions-layout .kv-row input[type=range]{width:100%}
.distributions-layout .control-grid{display:grid;gap:8px}
.distributions-layout .inline-note{color:#4b5563;font-size:0.92rem;margin-top:4px}
.distributions-layout .error{color:#b91c1c;font-weight:700;margin-top:10px}
.distributions-layout .plots-wrapper{height:clamp(360px,45vh,480px)}
.distributions-layout .summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:8px;margin:6px 0 4px}
.distributions-layout .summary-item{background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:4px}
.distributions-layout .summary-label{font-size:0.82rem;color:#6b7280;font-weight:700;text-transform:uppercase;letter-spacing:0.03em}
.distributions-layout .summary-value{font-size:1.05rem;font-weight:700;color:#0f172a}
.distributions-layout .summary-value.accent{color:#2563eb}
.distributions-layout .summary-value.subtle{color:#4b5563;font-weight:600;font-size:0.98rem}
.distributions-layout .meta-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;margin-top:2px}
.distributions-layout .formula-block{background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;padding:10px;height:100%}
.distributions-layout .formula-block h4{margin:0 0 4px;font-size:0.98rem}
.distributions-layout .toggle-row{display:flex;align-items:center;gap:10px;margin:8px 0}
.distributions-layout .toggle-row input{width:18px;height:18px}
body.dark-mode .distributions-layout .card{background:var(--card-background);border-color:var(--border-color);color:var(--text-color);box-shadow:none;}
body.dark-mode .distributions-layout .kv-row label,
body.dark-mode .distributions-layout .summary-value,
body.dark-mode .distributions-layout .inline-note{color:#e5e7eb;}
body.dark-mode .distributions-layout .summary-label{color:#cbd5e1;}
body.dark-mode .distributions-layout .summary-item{background:#1f2733;border-color:#3a4250;}
body.dark-mode .distributions-layout .formula-block{background:#1f2733;border-color:#3a4250;color:#e8edf5;}
body.dark-mode .distributions-layout .formula-block h4{color:#f8fafc;}
body.dark-mode .distributions-layout #pdf-formula,
body.dark-mode .distributions-layout #cdf-formula{color:#e8edf5;}
body.dark-mode .distributions-layout .pill{background:rgba(96,165,250,0.15);color:#dbeafe;}
body.dark-mode .distributions-layout select,
body.dark-mode .distributions-layout input[type=range],
body.dark-mode .distributions-layout input[type=number]{
  background:#111827;
  color:#e5e7eb;
  border-color:#3a4250;
}
@media(max-width:1240px){
  .distributions-layout .demo-grid{grid-template-columns:1fr}
  .distributions-layout .plots-wrapper{height:clamp(360px,52vh,520px)}
}

/* Averaging over time or ensemble */
.averaging-over-time-layout{max-width:1200px}
.averaging-over-time-layout .page-header{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-start;margin-bottom:10px}
.averaging-over-time-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap}
.averaging-over-time-layout .pill{display:inline-flex;align-items:center;gap:7px;padding:6px 10px;border-radius:999px;background:#e0f2fe;color:#0f3b64;font-weight:700;font-size:0.9rem}
.averaging-over-time-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.averaging-over-time-layout .demo-grid{display:grid;grid-template-columns:320px 1fr;gap:12px;align-items:start}
.averaging-over-time-layout .stacked-column{display:grid;gap:12px;align-content:start}
.averaging-over-time-layout .card{background:white;border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
.averaging-over-time-layout .kv-row{display:grid;grid-template-columns:140px 1fr 60px;gap:6px;align-items:center;margin:6px 0}
.averaging-over-time-layout .kv-row label{font-weight:700;font-size:0.95rem}
.averaging-over-time-layout .kv-row input,
.averaging-over-time-layout .kv-row select{width:100%}
.averaging-over-time-layout .kv-row small{color:#6b7280}
.averaging-over-time-layout .cta-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.averaging-over-time-layout .btn-primary{background:#2563eb;color:white;border:none;border-radius:8px;padding:9px 12px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px rgba(37,99,235,0.25)}
.averaging-over-time-layout .btn-secondary{background:#f3f4f6;color:#111827;border:none;border-radius:8px;padding:9px 12px;font-weight:700;cursor:pointer}
.averaging-over-time-layout .btn-primary:disabled,
.averaging-over-time-layout .btn-secondary:disabled{opacity:0.6;cursor:not-allowed}
.averaging-over-time-layout .error{color:#b91c1c;font-weight:700;min-height:20px;margin-top:6px}
.averaging-over-time-layout .inline-note{color:#4b5563;font-size:0.9rem}
.averaging-over-time-layout .stat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px}
.averaging-over-time-layout .stat-box{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px 12px}
.averaging-over-time-layout .stat-label{font-size:0.78rem;color:#6b7280;font-weight:800;letter-spacing:0.04em;text-transform:uppercase}
.averaging-over-time-layout .stat-value{font-size:1.08rem;font-weight:800;color:#0f172a}
.averaging-over-time-layout .controls-block{display:grid;grid-template-columns:1fr;gap:10px}
.averaging-over-time-layout .controls-block .card{padding:10px 12px}
.averaging-over-time-layout .plots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:10px}
.averaging-over-time-layout .plot-box{border:1px solid #e5e7eb;border-radius:10px;padding:6px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.03)}
.averaging-over-time-layout .plot-box h4{margin:4px 8px;font-size:0.95rem;color:#111827;display:flex;align-items:center;gap:6px}
.averaging-over-time-layout .plot{width:100%;height:200px}
.averaging-over-time-layout .stats-card .stat-value{font-size:0.98rem}
@media(max-width:1250px){.averaging-over-time-layout .demo-grid{grid-template-columns:1fr}}
@media(max-width:1100px){.averaging-over-time-layout .kv-row{grid-template-columns:150px 1fr 60px}}

body.dark-mode .averaging-over-time-layout .card{background:#0b1628;border-color:#1f2937;box-shadow:0 6px 16px rgba(0,0,0,0.35)}
body.dark-mode .averaging-over-time-layout .plot-box{background:#0f172a;border-color:#27303f;box-shadow:0 6px 16px rgba(0,0,0,0.28)}
body.dark-mode .averaging-over-time-layout .plot-box h4{color:#e2e8f0}
body.dark-mode .averaging-over-time-layout .pill{background:rgba(59,130,246,0.12);color:#e0e7ff}
body.dark-mode .averaging-over-time-layout .pill-subtle{background:rgba(148,163,184,0.18);color:#e2e8f0}
body.dark-mode .averaging-over-time-layout .btn-primary{background:#1d4ed8;box-shadow:0 2px 10px rgba(59,130,246,0.35)}
body.dark-mode .averaging-over-time-layout .btn-secondary{background:#1f2937;color:#e5e7eb}
body.dark-mode .averaging-over-time-layout .stat-box{background:#111827;border-color:#27303f}
body.dark-mode .averaging-over-time-layout .stat-label{color:#cbd5e1}
body.dark-mode .averaging-over-time-layout .stat-value{color:#f8fafc}
body.dark-mode .averaging-over-time-layout .inline-note,
body.dark-mode .averaging-over-time-layout label,
body.dark-mode .averaging-over-time-layout .kv-row small{color:#cbd5e1}
body.dark-mode .averaging-over-time-layout input,
body.dark-mode .averaging-over-time-layout select{background:#0b1220;border:1px solid #334155;color:#e2e8f0}
body.dark-mode .averaging-over-time-layout input:disabled,
body.dark-mode .averaging-over-time-layout select:disabled{background:#111827;color:#94a3b8}

/* Autocorrelation (stationary process) */
.autocorr-stationary-layout {
  display: grid;
  gap: 14px;
  max-width: 1320px;
  margin: 0 auto;
}
.autocorr-stationary-layout .page-header {
  display: grid;
  grid-template-columns: minmax(320px, 1fr) auto;
  gap: 12px;
  align-items: center;
}
.autocorr-stationary-layout .page-header h1 { margin: 0; font-size: 1.85rem; }
.autocorr-stationary-layout .eyebrow { text-transform: uppercase; letter-spacing: 0.08em; font-weight: 700; color: #0b5ebd; margin: 0 0 6px; }
.autocorr-stationary-layout .lede { color: #445063; max-width: 820px; margin: 6px 0 0; font-size: 0.98rem; }
.autocorr-stationary-layout .cta-stack { display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-end; align-items: center; }
.autocorr-stationary-layout .btn { border: none; padding: 10px 14px; border-radius: 10px; cursor: pointer; font-weight: 700; font-size: 0.95rem; white-space: nowrap; }
.autocorr-stationary-layout .btn-primary { background: #0b5ebd; color: #fff; }
.autocorr-stationary-layout .btn-secondary { background: #e9eef7; color: #0e234b; }
.autocorr-stationary-layout .btn:active { transform: translateY(1px); }
.autocorr-stationary-layout .control-panel { display: grid; grid-template-columns: repeat(auto-fit, minmax(190px, 1fr)); gap: 10px; padding: 12px; background: #f7f9fc; border: 1px solid #dde6f3; border-radius: 14px; }
.autocorr-stationary-layout .control-group { background: #fff; border: 1px solid #e0e7f3; border-radius: 12px; padding: 9px 10px; box-shadow: 0 6px 14px rgba(12,38,92,0.06); }
.autocorr-stationary-layout .control-group label { display: block; font-weight: 700; margin-bottom: 4px; color: #132645; font-size: 0.95rem; }
.autocorr-stationary-layout .control-group input[type=range],
.autocorr-stationary-layout .control-group select { width: 100%; }
.autocorr-stationary-layout .control-readout { font-weight: 700; margin-top: 2px; color: #0b3d78; font-size: 0.95rem; }
.autocorr-stationary-layout .hint { margin: 4px 0 0; font-size: 0.84rem; color: #5a6a85; }
.autocorr-stationary-layout .plots-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 12px;
}
.autocorr-stationary-layout .plot-card { background: #fff; border: 1px solid #dde6f3; border-radius: 14px; padding: 12px; box-shadow: 0 8px 20px rgba(12,38,92,0.08); }
.autocorr-stationary-layout .card-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 4px; }
.autocorr-stationary-layout .card-header h3 { margin: 2px 0 0; font-size: 1.05rem; }
.autocorr-stationary-layout .chip { background: rgba(11,94,189,0.12); color: #0b3d78; padding: 5px 10px; border-radius: 999px; font-weight: 700; font-size: 0.9rem; }
.autocorr-stationary-layout .chip-ghost { background: rgba(11,94,189,0.05); }
.autocorr-stationary-layout .plot { width: 100%; height: clamp(220px, 32vh, 280px); }
.autocorr-stationary-layout .w-100 { width: 100%; }
@media (max-width: 1024px) {
  .autocorr-stationary-layout .page-header {
    grid-template-columns: 1fr;
    align-items: flex-start;
  }
  .autocorr-stationary-layout .cta-stack { justify-content: flex-start; }
}
@media (max-width: 720px) {
  .autocorr-stationary-layout .plots-grid { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
  .autocorr-stationary-layout .btn { width: 100%; justify-content: center; text-align: center; }
  .autocorr-stationary-layout .cta-stack { gap: 6px; }
}

body.demo-sidebar-collapsed .autocorr-stationary-layout { max-width: min(1360px, calc(100vw - 20px)); }
body.demo-sidebar-collapsed .autocorr-stationary-layout .control-panel { grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap: 8px; }
body.demo-sidebar-collapsed .autocorr-stationary-layout .plots-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }

body.dark-mode .autocorr-stationary-layout .page-header h1,
body.dark-mode .autocorr-stationary-layout h3,
body.dark-mode .autocorr-stationary-layout .lede { color: #e2e8f0; }
body.dark-mode .autocorr-stationary-layout .eyebrow { color: #93c5fd; }
body.dark-mode .autocorr-stationary-layout .control-panel { background: #0b1628; border-color: #1f2937; }
body.dark-mode .autocorr-stationary-layout .control-group { background: #0f172a; border-color: #1f2937; box-shadow: 0 8px 20px rgba(0,0,0,0.35); }
body.dark-mode .autocorr-stationary-layout .control-group label,
body.dark-mode .autocorr-stationary-layout .control-readout { color: #e2e8f0; }
body.dark-mode .autocorr-stationary-layout .hint { color: #cbd5e1; }
body.dark-mode .autocorr-stationary-layout .btn-secondary { background: #1f2937; color: #e5e7eb; }
body.dark-mode .autocorr-stationary-layout .btn-primary { background: #1d4ed8; }
body.dark-mode .autocorr-stationary-layout .plot-card { background: #0f172a; border-color: #27303f; box-shadow: 0 10px 26px rgba(0,0,0,0.35); }
body.dark-mode .autocorr-stationary-layout .card-header { border-bottom: 1px solid #1f2937; padding-bottom: 6px; }
body.dark-mode .autocorr-stationary-layout .chip { background: rgba(147,197,253,0.16); color: #e0f2fe; }
body.dark-mode .autocorr-stationary-layout .chip-ghost { background: rgba(148,163,184,0.18); color: #e2e8f0; }

/* Delay Estimation (time domain) */
.delay-layout{
  --plot-height:210px;
  --xcorr-height:250px;
  max-width:min(1180px, calc(100vw - 32px));
}
body.demo-sidebar-collapsed .delay-layout{
  max-width:min(1320px, calc(100vw - 18px));
  --plot-height:200px;
  --xcorr-height:240px;
}
.delay-layout .delay-header{
  display:flex;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
  align-items:flex-start;
  margin-bottom:10px;
}
.delay-layout .delay-header h1{margin-bottom:6px;}
.delay-layout .delay-header p{margin-bottom:6px;max-width:880px;}
.delay-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap;}
.delay-layout .pill{
  display:inline-flex;
  align-items:center;
  gap:7px;
  padding:6px 10px;
  border-radius:999px;
  font-weight:700;
  font-size:0.9rem;
}
.delay-layout .pill-primary{background:#e0f2fe;color:#0f3b64;}
.delay-layout .pill-muted{background:#f3f4f6;color:#374151;}
.delay-layout .pill-outline{background:#e5e7eb;color:#111827;}
.delay-layout .control-card{
  background:white;
  border:1px solid #d9dfe7;
  border-radius:12px;
  padding:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.05);
  margin-bottom:12px;
}
.delay-layout .controls-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:10px;
  align-items:end;
}
.delay-layout .range-pair{
  display:grid;
  grid-template-columns:1fr 88px;
  gap:8px;
  align-items:center;
}
.delay-layout .stat-cluster{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:flex-end;
  align-items:center;
}
.delay-layout .stat-label{font-size:0.8rem;font-weight:800;color:#6b7280;text-transform:uppercase;margin-bottom:2px;}
.delay-layout .stat-value{font-weight:800;color:#0f172a;}
.delay-layout .plots-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:10px;
  align-items:start;
}
.delay-layout .plot-box{
  border:1px solid #e5e7eb;
  border-radius:10px;
  padding:8px;
  background:#fff;
  box-shadow:0 2px 8px rgba(0,0,0,0.03);
}
.delay-layout .plot-box h4{margin:0 0 4px;color:#0f172a;font-size:1rem;line-height:1.4;}
.delay-layout .plot-target{height:var(--plot-height);}
.delay-layout #plot-xcorr.plot-target{height:var(--xcorr-height);}
.delay-layout .text-muted{margin-top:4px;display:block;}
.delay-layout .lede{line-height:1.5;}
body.dark-mode .delay-layout .control-card{background:#0b1628;border-color:#1f2937;box-shadow:0 8px 18px rgba(0,0,0,0.35);}
body.dark-mode .delay-layout .plot-box{background:#0f172a;border-color:#27303f;box-shadow:0 8px 20px rgba(0,0,0,0.28);}
body.dark-mode .delay-layout .plot-box h4{color:#e2e8f0;}
body.dark-mode .delay-layout .pill-primary,
body.dark-mode .delay-layout .pill-outline,
body.dark-mode .delay-layout .pill-muted{
  background:rgba(59,130,246,0.14);
  color:#e0e7ff;
}
body.dark-mode .delay-layout .text-muted,
body.dark-mode .delay-layout label{color:#cbd5e1!important;}
body.dark-mode .delay-layout .stat-label{color:#cbd5e1;}
body.dark-mode .delay-layout .stat-value{color:#f8fafc;}
body.dark-mode .delay-layout .btn-primary{background:#1d4ed8;color:#fff;}
@media(max-width:980px){
  .delay-layout .controls-grid{grid-template-columns:repeat(auto-fit,minmax(210px,1fr));}
  .delay-layout .plots-grid{grid-template-columns:repeat(auto-fit,minmax(280px,1fr));}
}
@media(max-height:900px){
  .delay-layout{--plot-height:190px;--xcorr-height:225px;}
}

/* Delay Estimation (frequency domain) */
.delay-frequency-layout .compact-header{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px}
.delay-frequency-layout .compact-header h1{margin:0 0 4px;font-size:1.75rem}
.delay-frequency-layout .compact-header p{margin:0;font-size:0.95rem;line-height:1.4;color:#334155}
.delay-frequency-layout .compact-chips{display:flex;gap:6px;flex-wrap:wrap;align-items:center}
.delay-frequency-layout .compact-chips .pill{background:#e5f0fb;color:#0f3b64;font-weight:700;border-radius:999px;padding:4px 10px;display:inline-flex;align-items:center;gap:6px;font-size:0.85rem}
.delay-frequency-layout .control-card{background:white;border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 3px 10px rgba(0,0,0,0.05);margin-bottom:12px}
.delay-frequency-layout .control-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:10px;align-items:end}
.delay-frequency-layout .plot-box{border:1px solid #e5e7eb;border-radius:10px;padding:6px;background:#fff;box-shadow:0 1px 6px rgba(0,0,0,0.03)}
.delay-frequency-layout .plot-box h4{margin:0 0 4px;color:#0f172a;font-size:1rem;line-height:1.3}
.delay-frequency-layout .stat-label{font-size:0.74rem;font-weight:800;color:#6b7280;text-transform:uppercase}
.delay-frequency-layout .stat-value{font-weight:800;color:#0f172a;font-size:0.92rem}
.delay-frequency-layout .stat-row{display:flex;gap:12px;align-items:center;justify-content:flex-end;flex-wrap:wrap}
.delay-frequency-layout .plots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));grid-auto-flow:row dense;gap:10px}
.delay-frequency-layout .plot-box.wide{grid-column:1 / -1}
body.dark-mode .delay-frequency-layout .control-card{background:#0b1628;border-color:#1f2937;box-shadow:0 8px 18px rgba(0,0,0,0.35)}
body.dark-mode .delay-frequency-layout .plot-box{background:#0f172a;border-color:#27303f;box-shadow:0 8px 20px rgba(0,0,0,0.28)}
body.dark-mode .delay-frequency-layout .plot-box h4{color:#e2e8f0}
body.dark-mode .delay-frequency-layout .pill{background:rgba(59,130,246,0.14)!important;color:#e0e7ff!important}
body.dark-mode .delay-frequency-layout label,
body.dark-mode .delay-frequency-layout .stat-label{color:#cbd5e1!important}
body.dark-mode .delay-frequency-layout .stat-value{color:#f8fafc}
body.dark-mode .delay-frequency-layout .btn-primary{background:#1d4ed8;color:#fff}

/* Harmonic detection */
.harmonic-layout { --hd-plot-height: clamp(190px, 25vh, 230px); }
.harmonic-layout{max-width:min(1260px, calc(100vw - 28px));margin:0 auto;}
.harmonic-layout .page-header{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-start;margin-bottom:6px}
.harmonic-layout .page-header h1{margin:0;font-size:1.7rem}
.harmonic-layout .page-header p{margin:4px 0 0}
.harmonic-layout .chip-row{display:flex;gap:6px;flex-wrap:wrap}
.harmonic-layout .pill{display:inline-flex;align-items:center;gap:6px;padding:5px 9px;border-radius:999px;background:#e0f2fe;color:#0f3b64;font-weight:700;font-size:0.9rem}
.harmonic-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.harmonic-layout .control-card{background:white;border:1px solid #d9dfe7;border-radius:12px;padding:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);margin-bottom:10px}
.harmonic-layout .control-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px;align-items:start}
.harmonic-layout .kv-row{display:grid;grid-template-columns:140px 1fr 64px;gap:6px;align-items:center;margin:6px 0}
.harmonic-layout .kv-row label{font-weight:700;font-size:0.92rem}
.harmonic-layout .kv-row input[type="number"]{width:100%}
.harmonic-layout .kv-row small{color:#6b7280}
.harmonic-layout .mode-row{display:flex;gap:10px;flex-wrap:wrap;margin:4px 0}
.harmonic-layout .mode-row label{font-weight:700;font-size:0.9rem}
.harmonic-layout .stat-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:8px;margin-top:6px}
.harmonic-layout .stat-box{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:8px}
.harmonic-layout .stat-label{font-size:0.78rem;color:#6b7280;font-weight:800;letter-spacing:0.04em;text-transform:uppercase}
.harmonic-layout .stat-value{font-size:1.02rem;font-weight:800;color:#0f172a}
.harmonic-layout .plots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:10px;align-items:start}
.harmonic-layout .plot-box{border:1px solid #e5e7eb;border-radius:10px;padding:6px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.03)}
.harmonic-layout .plot-box h4{margin:4px 6px;font-size:0.93rem;color:#111827;display:flex;align-items:center;gap:6px}
.harmonic-layout .plot{width:100%;height:var(--hd-plot-height);min-height:185px}
.harmonic-layout .btn-primary{background:#2563eb;color:white;border:none;border-radius:8px;padding:8px 11px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px rgba(37,99,235,0.25)}
body.demo-sidebar-collapsed .harmonic-layout{max-width:min(1380px, calc(100vw - 16px))}
body.demo-sidebar-collapsed .harmonic-layout .plots-grid{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
body.demo-sidebar-collapsed .harmonic-layout{--hd-plot-height: clamp(185px, 24vh, 215px)}
body.demo-sidebar-collapsed .harmonic-layout .control-grid{grid-template-columns:repeat(auto-fit,minmax(230px,1fr))}
body.demo-sidebar-collapsed .harmonic-layout .kv-row{grid-template-columns:128px 1fr 60px}
body.dark-mode .harmonic-layout .control-card{background:#0b1628;border-color:#1f2937;box-shadow:0 8px 20px rgba(0,0,0,0.35)}
body.dark-mode .harmonic-layout .plot-box{background:#0f172a;border-color:#27303f;box-shadow:0 8px 20px rgba(0,0,0,0.28)}
body.dark-mode .harmonic-layout .plot-box h4{color:#e2e8f0}
body.dark-mode .harmonic-layout .pill{background:rgba(59,130,246,0.14);color:#e0e7ff}
body.dark-mode .harmonic-layout .pill-subtle{background:rgba(148,163,184,0.18);color:#e5e7eb}
body.dark-mode .harmonic-layout .stat-box{background:#111827;border-color:#27303f}
body.dark-mode .harmonic-layout .stat-label{color:#cbd5e1}
body.dark-mode .harmonic-layout .stat-value{color:#f8fafc}
body.dark-mode .harmonic-layout label,
body.dark-mode .harmonic-layout p{color:#e2e8f0}
body.dark-mode .harmonic-layout .btn-primary{background:#1d4ed8;box-shadow:0 2px 10px rgba(59,130,246,0.35)}

/* Finite Observation intervals */
.foi-layout{--plot-height:230px;max-width:min(1240px, calc(100vw - 26px));padding:0 10px;}
body.demo-sidebar-collapsed .foi-layout{max-width:min(1360px, calc(100vw - 18px));}
body.demo-sidebar-collapsed .foi-layout{--plot-height:220px;}
@media (max-width: 1200px){
  .foi-layout{--plot-height:220px;}
}
@media (max-height: 900px){
  .foi-layout{--plot-height:205px;}
}
.foi-layout .foi-header{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-start;margin-bottom:6px;}
.foi-layout .foi-header h1{margin:0 0 6px;font-size:1.6rem;}
.foi-layout .foi-header p{margin:0;color:#4b5563;max-width:760px;}
.foi-layout .chip-row{display:flex;gap:8px;flex-wrap:wrap}
.foi-layout .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#e0f2fe;color:#0f3b64;font-weight:700;font-size:0.88rem}
.foi-layout .pill-subtle{background:#f3f4f6;color:#4b5563}
.foi-layout .control-card{background:#fff;border:1px solid #d9dfe7;border-radius:12px;padding:12px;margin-bottom:10px;box-shadow:0 3px 8px rgba(0,0,0,0.04)}
.foi-layout .control-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:10px;align-items:start}
.foi-layout .kv-row{display:grid;grid-template-columns:130px 1fr 72px;gap:8px;align-items:center;margin:4px 0}
.foi-layout .kv-row label{font-weight:700;font-size:0.92rem}
.foi-layout .kv-row input[type="number"]{width:100%;margin:0}
.foi-layout .kv-row small{color:#6b7280}
.foi-layout .select-row{display:grid;grid-template-columns:1fr 1.25fr;gap:8px;align-items:center;margin:6px 0}
.foi-layout .select-row label{font-weight:700;font-size:0.92rem}
.foi-layout .plots-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:10px;margin-top:8px}
.foi-layout .plot-box{border:1px solid #e5e7eb;border-radius:10px;padding:8px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.03)}
.foi-layout .plot-box h4{margin:4px 6px;font-size:0.9rem;color:#111827;display:flex;align-items:center;gap:6px}
.foi-layout .plot{width:100%;height:var(--plot-height)}
.foi-layout .btn-primary{background:#2563eb;color:white;border:none;border-radius:8px;padding:8px 11px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px rgba(37,99,235,0.22);margin-top:2px}
.foi-layout .stat-row{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0}
.foi-layout .stat-chip{background:#f8fafc;border:1px solid #e5e7eb;border-radius:10px;padding:8px 10px;min-width:160px;display:flex;flex-direction:column;gap:2px}
.foi-layout .stat-heading{margin:0;font-size:0.8rem;color:#6b7280;letter-spacing:0.02em;text-transform:uppercase;font-weight:800}
.foi-layout .stat-value{font-weight:800;font-size:1rem;color:#0f172a}
.foi-layout .inline-note{color:#4b5563;font-size:0.9rem;margin:0 0 6px}
.foi-layout .meta-card{display:flex;flex-direction:column;gap:6px}
body.dark-mode .foi-layout .control-card{background:#0b1628;border-color:#1f2937;box-shadow:0 8px 20px rgba(0,0,0,0.35)}
body.dark-mode .foi-layout .plot-box{background:#0f172a;border-color:#27303f;box-shadow:0 8px 20px rgba(0,0,0,0.28)}
body.dark-mode .foi-layout .plot-box h4{color:#e2e8f0}
body.dark-mode .foi-layout .pill{background:rgba(59,130,246,0.14);color:#e0e7ff}
body.dark-mode .foi-layout .pill-subtle{background:rgba(148,163,184,0.18);color:#e5e7eb}
body.dark-mode .foi-layout .stat-heading{color:#e2e8f0}
body.dark-mode .foi-layout label,
body.dark-mode .foi-layout p,
body.dark-mode .foi-layout .stat-value,
body.dark-mode .foi-layout .inline-note{color:#e2e8f0}
body.dark-mode .foi-layout .stat-value strong{color:#f8fafc}
body.dark-mode .foi-layout .btn-primary{background:#1d4ed8;box-shadow:0 2px 10px rgba(59,130,246,0.35)}
body.dark-mode .foi-layout .stat-chip{background:#0b1628;border-color:#27303f}